---
metadata:
  title: Table Addendum - via module calling
---
modules:  
  - docassemble.VirtualCourtToolbox.addenda
---
objects:  
  - debts: DAList.using(object_type=Thing, complete_attribute='complete', ask_number=True) 
---
mandatory: true
question: |  
subquestion: |
  If you have a DAList that collected more than one record, this interview illustrates how to call the 'addenda' module then display them in your addendum docx file.
field: intro
---
question: |  
subquestion: |
fields:
  - How many debts do you owe?: debts.target_number
    datatype: integer
    default: 2
---
question: |    
subquestion: | 
  % if debts.target_number > 1:
    Please enter information related to your ${ ordinal(i) } debt.
  % else:
    Please enter information related to your debt. 
  % endif
fields:
  - Debt name: debts[i].name.text  
    default: 'House'
  - Debt date: debts[i].debtDate
    datatype: date
    default: '1/1/2000'
  - How much did you borrow?: debts[i].borrowedAmt
    datatype: currency
    default: 10000
  - How much do you still owe?: debts[i].oweAmt
    datatype: currency
    default: 8000
---
mandatory: true
question: |
subquestion: |
  You entered the flollowing:
  ${ debts }

if: addAddendum
attachment:
  - variable name: table_addendum    
    docx template file: table-addendum.docx
---
code: |    
  debts[i].name.text  
  debts[i].complete = True 
---
comment: Do all the addenda related code work here.
code: |  
  tblList = list() 
  #1. Put each DAList into a regular list if it has more than one record
  if debts.target_number > 1: 
    tempTable1 = ()
    heading1 = ['Debt Name', 'Debt Date', 'Borrowed Amount', 'Amount Still Owe']
    title1 = 'List of debts'  
    tempTable1 = myTable(debts, title1, heading1).tableList
    #2. Add it to the table list to be used in docx.
    tblList.append(tempTable1)
    
  #Repeate the above if you have more than one DAList in your interview. 
  #if defendants.target_number > 1: 
    #tempTable2 = ()
    #heading2 = ['Defendant Name', 'Defendant Birth Date']
    #title2 = 'List of dependants'  
    #tempTable2 = myTable(defendants, title2, heading2).tableList  
    #tblList.append(tempTable2)
  
  #3. Determine if addendum is needed
  addAddendum = bool(tblList)
     
    
  