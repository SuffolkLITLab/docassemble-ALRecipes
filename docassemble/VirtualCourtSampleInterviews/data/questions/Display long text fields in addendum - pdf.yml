---
metadata:
  title: Text Addendum to pdf - via module calling
---
modules:  
  - docassemble.VirtualCourtToolbox.addenda
---
mandatory: true
question: |  
subquestion: |
  If you have text fields that could be too long to display on your template file, this interview illustrates how to display them in your addendum by calling the 'addenda' module.
  
  It is assumed that your main template is a pdf file, see how the "cutoff" values are used in the pdf file. 
  
  Copy the docx addendum file used in this interview. You can change the docx name and its heading.
field: intro
---
question: |    
subquestion: | 
  Create some fields that need addendum
fields:
  - Describe other relief: other_relief
    input type: area
  - Describe losses caused by defendant: losses
    input type: area
---
mandatory: true
question: |
subquestion: | 
  Here is the output file.
  
  ${ outputFile }
---
attachment:
  - variable name: main
    pdf template file: debts.pdf
    fields:
      - Textfield69: ${ other_relief_cutoff }
      - Textfield73: ${ losses_cutoff }
---
attachment:
  - variable name: addendum    
    docx template file: text-addendum.docx
--- 
code: |      
  if addAddendum:
    outputFile = pdf_concatenate(main, addendum, filename="final.pdf")
  else:
    outputFile = pdf_concatenate(main, filename="final.pdf")
---
comment: Do all the addenda related code work here.
code: |    
  #1. Put text fields into a list  
  tmpList = myTextList(other_relief, 40, 'PART J(5). Losses suffered by the Plaintiff')
  txtList1 = tmpList.txtList
  other_relief_cutoff = tmpList.text_cutoff #to be used in the pdf main form
  
  tmpList = myTextList(losses, 35, 'PART J(8). Other order requested')
  txtList2 = tmpList.txtList
  losses_cutoff = tmpList.text_cutoff #to be used in the pdf main form
  
  #2 Merge the above lists into txtFieldsList (standard name used in addendum)
  txtFieldsList = txtList1 + txtList2
  
  #3. Check if we should invoke addendum
  addAddendum = bool(txtFieldsList)

  